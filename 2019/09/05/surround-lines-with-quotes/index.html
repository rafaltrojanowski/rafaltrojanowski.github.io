<!DOCTYPE html><html lang="en" prefix="og: http://ogp.me/ns#"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title>Surround lines with quotes · Rafal Trojanowski - Ruby on Rails Developer</title><meta name="description" content="I'm remote Ruby on Rails Developer based in Poland"><meta name="og:title" content="Surround lines with quotes"><meta name="og:type" content="website"><meta name="og:url" content="http://rafaltrojanowski.github.io/2019/09/05/surround-lines-with-quotes/"><meta name="og:image" content="http://image.toast.com/aaaaahq/hola_cover.JPG"><meta name="og:description" content="I'm remote Ruby on Rails Developer based in Poland"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.ico"><link rel="stylesheet" href="/css/chiangmai.css"><meta name="steem:author" content="@stunstunstun"><link rel="search" type="application/opensearchdescription+xml" href="http://rafaltrojanowski.github.io/atom.xml" title="Rafal Trojanowski - Ruby on Rails Developer"><meta name="generator" content="Hexo 4.2.1"><link rel="alternate" href="/atom.xml" title="Rafal Trojanowski - Ruby on Rails Developer" type="application/atom+xml">
</head><body class="post"><div id="fb-root"></div><div class="wrap"><header><nav class="navi-post"><a class="navi-post-back" href="javascript:history.back()"><i class="fa fa-arrow-left" aria-hidden="true"></i></a><a class="navi-post-home" href="/"><i class="fa fa-home" aria-hidden="true"></i></a></nav></header><main class="post"><div class="post"><article class="post-block"><h1 class="post-title">Surround lines with quotes</h1><div class="post-info"><div class="post-info-profile"><a href="https://github.com/rafaltrojanowski" target="_blank"><img src="/image/rt-avatar.jpg"></a></div><div class="post-info-details"><div class="post-categories"></div><div class="post-date">Sep 5, 2019</div></div></div><div class="post-share"><div class="fb-like" data-href="http://rafaltrojanowski.github.io/2019/09/05/surround-lines-with-quotes/" data-layout="button_count" data-action="like" data-size="small" data-show-faces="true" data-share="false">                 </div><div class="fb-share-button" data-href="http://rafaltrojanowski.github.io/2019/09/05/surround-lines-with-quotes/" data-layout="button" data-size="small" data-mobile-iframe="true"></div></div><div class="post-content"><p>Recently, I have been transferring a huge file (more than 7k lines) to <code>Ruby#Array()</code>.</p>
<p>Fragment:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Mozilla&#x2F;5.0 (Amiga; U; AmigaOS 1.3; en; rv:1.8.1.19) Gecko&#x2F;20081204 SeaMonkey&#x2F;1.1.14</span><br><span class="line">Mozilla&#x2F;5.0 (AmigaOS; U; AmigaOS 1.3; en-US; rv:1.8.1.21) Gecko&#x2F;20090303 SeaMonkey&#x2F;1.1.15</span><br><span class="line">Mozilla&#x2F;5.0 (AmigaOS; U; AmigaOS 1.3; en; rv:1.8.1.19) Gecko&#x2F;20081204 SeaMonkey&#x2F;1.1.14</span><br><span class="line">(...)</span><br></pre></td></tr></table></figure>

<p>What I needed was:</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">AGENTS = [</span><br><span class="line">  <span class="string">"Mozilla/5.0 (Amiga; U; AmigaOS 1.3; en; rv:1.8.1.19) Gecko/20081204 SeaMonkey/1.1.14"</span>,</span><br><span class="line">  <span class="string">"Mozilla/5.0 (AmigaOS; U; AmigaOS 1.3; en-US; rv:1.8.1.21) Gecko/20090303 SeaMonkey/1.1.15"</span>,</span><br><span class="line">  <span class="string">"Mozilla/5.0 (AmigaOS; U; AmigaOS 1.3; en; rv:1.8.1.19) Gecko/20081204 SeaMonkey/1.1.14"</span>,</span><br><span class="line">  (...)</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>Modifying this manually is overkill, isn’t it? Honestly, last time I ended with copying only a few first lines and do boring manual work, but this time I decided to add functionality that allows to chose random User-Agent from the whole list.</p>
<p>My first thought was to use Vim macro, see here: <a href="http://vim.wikia.com/wiki/Macros" target="_blank" rel="noopener">http://vim.wikia.com/wiki/Macros</a></p>
<p>Thankfully, I found a faster and easier solution for how to wrap quickly my data.</p>
<p>There is <code>sed</code> command in Linux: <a href="https://www.geeksforgeeks.org/sed-command-in-unix/" target="_blank" rel="noopener">https://www.geeksforgeeks.org/sed-command-in-unix/</a></p>
<p>So what I did is:</p>
<p>First, I copied all lines of <code>User-Agents</code> to empty Ruby file.</p>
<p>Then:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -e &quot;s&#x2F;\(.*\)&#x2F;&#39;\1&#39;&#x2F;&quot; agents.rb &gt; temp_quotes.rb</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -e &quot;s&#x2F;\(.*\)&#x2F;\1,&#x2F;&quot; temp_quotes.rb &gt; temp_comma.rb</span><br></pre></td></tr></table></figure>

<p>Finally:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mv temp_comma user_agents.rb</span><br></pre></td></tr></table></figure>

<p>Voila!</p>
</div></article></div></main><footer><div class="paginator"><a class="prev" href="/2019/01/29/vims-global-search-and-replace/"><i class="fa fa-arrow-left" aria-hidden="true"></i></a><a class="next" href="/2020/09/21/how-to-dockerize-rails-6-app/"><i class="fa fa-arrow-right" aria-hidden="true"></i></a></div><div class="copyright"><p>© 2012 - 2024 <a href="https://github.com/stunstunstun" target="_blank">Rafał Trojanowski</a>. Powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/stunstunstun/hexo-theme-chiangmai" target="_blank">hexo-theme-chiangmai</a>.</p></div></footer></div><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create','UA-112438069-1','auto');ga('send','pageview');</script></body></html>